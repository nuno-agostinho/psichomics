var shinyBS={inputBindings:{}};shinyBS.inputBindings.toggle=new Shiny.InputBinding,$.extend(shinyBS.inputBindings.toggle,{find:function(n){return $(n).find(".sbs-toggle-button")},getValue:function(n){return $(n).hasClass("active")},subscribe:function(n,e){$(n).on("click",function(t){$(n).toggleClass("active").blur(),e()})},unsubscribe:function(n){$(n).off("click")}}),Shiny.inputBindings.register(shinyBS.inputBindings.toggle),shinyBS.inputBindings.modal=new Shiny.InputBinding,$.extend(shinyBS.inputBindings.modal,{find:function(n){return $(n).find(".sbs-modal")},getValue:function(n){return $(n).hasClass("in")},subscribe:function(n,e){$(n).on("hidden.bs.modal shown.bs.modal",e)},unsubscribe:function(n){$(n).off("hidden.bs.modal shown.bs.modal")},receiveMessage:function(n,e){e.hasOwnProperty("toggle")&&("show"==e.toggle?$(n).modal("show"):"hide"==e.toggle?$(n).modal("hide"):$(n).modal("toggle"))},initialize:function(n){$("#"+$(n).attr("data-sbs-trigger")).attr({"data-toggle":"modal","data-target":"#"+$(n).attr("id")})}}),Shiny.inputBindings.register(shinyBS.inputBindings.modal),shinyBS.inputBindings.collapse=new Shiny.InputBinding,$.extend(shinyBS.inputBindings.collapse,{find:function(n){return $(n).find(".sbs-panel-group")},getValue:function(n){return $(n).data("sbs-value")},receiveMessage:function(n,e){var t=$(n);if(e.hasOwnProperty("style"))for(var s=Object.keys(e.style),i=0;i<s.length;i++){t.find("div[value='"+s[i]+"']").removeClass("panel-primary panel-danger panel-warning panel-error panel-info panel-success").addClass("panel-"+e.style[s[i]])}e.hasOwnProperty("open")&&(Array.isArray(e.open)||(e.open=[e.open]),e.open.forEach(function(n,e,s){t.find("div[value='"+n+"'] > .panel-collapse").collapse("show")})),e.hasOwnProperty("close")&&(Array.isArray(e.close)||(e.close=[e.close]),e.close.forEach(function(n,e,s){t.find("div[value='"+n+"'] > .panel-collapse").collapse("hide")}))},subscribe:function(n,e){$(n).find(".collapse").on("shown.bs.collapse hidden.bs.collapse",e)},initialize:function(n){var e=$(n),t=e.children(".panel"),s=[];t.each(function(n){$(this).children("div.panel-collapse.collapse").hasClass("in")&&s.push($(this).attr("value"));var t=$(this).children("div.panel-collapse.collapse");if("FALSE"==e.attr("data-sbs-multi"))var i="#"+e.attr("id");else i=!1;t.collapse({parent:i,toggle:!1})}),e.data("sbs-value",s),t.on("show.bs.collapse",function(n){var t=e.data("sbs-value");t.push($(this).attr("value")),e.data("sbs-value",t)}),t.on("hide.bs.collapse",function(n){var t=e.data("sbs-value"),s=t.indexOf($(this).attr("value"));-1!=s&&(t.splice(s,1),e.data("sbs-value",t))})}}),Shiny.inputBindings.register(shinyBS.inputBindings.collapse),Shiny.addCustomMessageHandler("bsAlertCreate",function(n){var e=!0;if(n.hasOwnProperty("alertId")&&$("#"+n.alertId).length>0&&(e=!1),e){var t=$("<div class = 'alert'></div>");n.hasOwnProperty("style")?t.addClass("alert-"+n.style):t.addClass("alert-info"),n.hasOwnProperty("dismiss")&&t.addClass("alert-dismissable"),n.hasOwnProperty("alertId")&&t.attr("id",n.alertId),n.hasOwnProperty("dismiss")&&1==n.dismiss&&t.append("<button type='button' class='close' data-dismiss='alert'>&times;</button>"),n.hasOwnProperty("title")&&t.append("<h4>"+n.title+"</h4>"),n.hasOwnProperty("content")&&t.append(n.content),1==n.append?t.appendTo("#"+n.id):$("#"+n.id).html(t)}}),Shiny.addCustomMessageHandler("bsAlertClose",function(n){$("#"+n).alert("close")}),shinyBS.addTooltip=function(n,e,t){var s=shinyBS.getTooltipTarget(n);t=$.extend(t,{html:!0}),"tooltip"==e?(s.tooltip("destroy"),s.tooltip(t)):"popover"==e&&(s.popover("destroy"),s.popover(t))},shinyBS.removeTooltip=function(n,e){var t=shinyBS.getTooltipTarget(n);"tooltip"==e?t.tooltip("destroy"):"popover"==e&&t.popover("destroy")},shinyBS.getTooltipTarget=function(n){return $("#"+n).closest(".shiny-input-container, .shiny-bound-output, .btn, .shiny-download-link")},Shiny.addCustomMessageHandler("updateTooltipOrPopover",function(n){"add"==n.action?shinyBS.addTooltip(n.id,n.type,n.options):"remove"==n.action&&shinyBS.removeTooltip(n.id,n.type)}),Shiny.addCustomMessageHandler("bsButtonUpdate",function(n){var e=$("button#"+n.id),t=e.find("i");(t=t.length>0?t[0].outerHTML:"",n.hasOwnProperty("label")&&e.html(t+n.label),n.hasOwnProperty("icon"))&&(0==e.children().length?e.prepend(n.icon):e.find("i").replaceWith(n.icon));n.hasOwnProperty("value")&&e.hasClass("sbs-toggle-button")&&n.value!=e.hasClass("active")&&e.trigger("click"),n.hasOwnProperty("style")&&e.removeClass("btn-default btn-primary btn-success btn-info btn-warning btn-danger btn-link").addClass("btn-"+n.style),n.hasOwnProperty("size")&&(e.removeClass("btn-lg btn-sm btn-xs"),"default"!=n.size&&e.addClass(n.size)),n.hasOwnProperty("block")&&e.toggleClass("btn-block",n.block),n.hasOwnProperty("disabled")&&(n.disabled?e.attr("disabled","disabled"):e.attr("disabled",!1))});
